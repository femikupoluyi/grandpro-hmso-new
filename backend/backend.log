
> backend@1.0.0 start
> node src/server.js

[dotenv@17.2.3] injecting env (11) from .env -- tip: ⚙️  override existing env vars with { override: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: 🔐 prevent building .env in docker: https://dotenvx.com/prebuild
[dotenv@17.2.3] injecting env (0) from .env -- tip: ✅ audit secrets and track compliance: https://dotenvx.com/ops
Initializing predictive analytics models...
Initializing Predictive Analytics Service...
Initializing backup service...
Failed to initialize analytics services: TypeError: Cannot read properties of undefined (reading 'connect')
    at PredictiveAnalyticsService.registerModel (/root/grandpro-hmso-new/backend/src/services/analytics.service.js:36:31)
    at PredictiveAnalyticsService.initialize (/root/grandpro-hmso-new/backend/src/services/analytics.service.js:23:16)
    at /root/grandpro-hmso-new/backend/src/routes/analytics.routes.js:15:28
    at Object.<anonymous> (/root/grandpro-hmso-new/backend/src/routes/analytics.routes.js:23:3)
    at Module._compile (node:internal/modules/cjs/loader:1521:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1623:10)
    at Module.load (node:internal/modules/cjs/loader:1266:32)
    at Module._load (node:internal/modules/cjs/loader:1091:12)
    at Module.require (node:internal/modules/cjs/loader:1289:19)
    at require (node:internal/modules/helpers:182:18)
Backup schedules configured:
  - Daily incremental: 2:00 AM
  - Weekly full: Sunday 3:00 AM
  - Monthly archive: 1st of month 4:00 AM
Backup configuration test failed: TypeError: Cannot read properties of undefined (reading 'connect')
    at BackupService.testBackupConfiguration (/root/grandpro-hmso-new/backend/src/services/backup.service.js:375:33)
    at BackupService.initialize (/root/grandpro-hmso-new/backend/src/services/backup.service.js:37:16)
    at async /root/grandpro-hmso-new/backend/src/routes/security.routes.js:17:5
Backup service initialized successfully
Connected to PostgreSQL database
Connected to PostgreSQL database
✅ GrandPro HMSO Backend Server running on port 5001
📍 Environment: development
🌍 Timezone: Africa/Lagos
💵 Currency: NGN
🏥 Application: GrandPro HMSO
✅ Database connected successfully
📅 Server time: 2025-10-04T02:44:39.617Z
🗄️ Database: neondb
Predictive Analytics Service initialized with 0 models
Analytics services initialized
Sequelize connection established successfully.
/root/grandpro-hmso-new/backend/src/middleware/security.middleware.js:71
    const client = await pool.connect();
                              ^

TypeError: Cannot read properties of undefined (reading 'connect')
    at ServerResponse.<anonymous> (/root/grandpro-hmso-new/backend/src/middleware/security.middleware.js:71:31)
    at ServerResponse.emit (node:events:536:35)
    at onFinish (node:_http_outgoing:1031:10)
    at callback (node:internal/streams/writable:766:21)
    at afterWrite (node:internal/streams/writable:710:5)
    at afterWriteTick (node:internal/streams/writable:696:10)
    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)

Node.js v20.19.5
